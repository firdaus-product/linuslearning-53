<!DOCTYPE html>
<html lang="ms-MY">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kemahiran Pemulihan: Anggaran & Bundar</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    /* --- UI STYLE (TEMA HIJAU KONSISTEN) --- */
    body { 
        font-family: 'Fredoka', sans-serif; 
        background-color: #f0fdf4; 
        background-image: radial-gradient(#86efac 2px, transparent 2px); 
        background-size: 30px 30px; 
    }
    
    /* Card Container */
    .game-card { 
        background: white; 
        border: 4px solid #475569; 
        box-shadow: 8px 8px 0px #00000020; 
        border-radius: 1.5rem; 
        min-height: 600px; 
        position: relative;
    }
    
    /* Buttons 3D */
    .btn-3d { 
        transition: all 0.1s; 
        border-bottom-width: 6px; 
        border-color: rgba(0,0,0,0.2); 
        transform: translateY(0); 
        cursor: pointer; 
        display: inline-block; 
    }
    .btn-3d:active:not(:disabled) { 
        transform: translateY(4px); 
        border-bottom-width: 2px; 
        box-shadow: none; 
    }
    .btn-3d:disabled { opacity: 0.6; cursor: not-allowed; border-bottom-width: 6px; filter: grayscale(100%); }

    /* Animation */
    .shake { animation: shake 0.4s ease-in-out; }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }
    
    /* --- STYLES KHUSUS --- */

    /* 1. Makmal Anggaran (Jar) */
    .jar-container {
        width: 140px; height: 220px;
        border: 6px solid #94a3b8; border-top: none; border-radius: 0 0 2rem 2rem;
        background: white; position: relative; margin: 0 auto; overflow: hidden;
        box-shadow: inset 5px 5px 10px rgba(0,0,0,0.05);
    }
    .jar-lid {
        width: 150px; height: 20px; background: #64748b;
        position: absolute; top: -20px; left: -11px; border-radius: 4px;
    }
    .guli-fill {
        position: absolute; bottom: 0; left: 0; width: 100%;
        background-color: #fca5a5; background-image: radial-gradient(#ef4444 20%, transparent 20%);
        background-size: 15px 15px; transition: height 1s ease-out;
    }
    .guli-fill.ref { background-color: #93c5fd; background-image: radial-gradient(#3b82f6 20%, transparent 20%); }

    /* 2. Bukit Bundar (Hill) - FIXED POSITIONING */
    .hill-container { position: relative; width: 100%; height: 200px; margin-bottom: 2rem; overflow: visible; }
    .hill-svg { width: 100%; height: 100%; overflow: visible; }
    .hill-path { fill: none; stroke: #cbd5e1; stroke-width: 8; stroke-linecap: round; }
    
    /* Titik Statik (Start, End, Peak) */
    .hill-point { 
        width: 20px; height: 20px; 
        background: white; border: 5px solid #64748b; border-radius: 50%; 
        position: absolute; z-index: 10; 
        transform: translate(-50%, 50%); /* Center point on line */
    }
    
    /* Label Titik */
    .hill-label {
        position: absolute; transform: translate(-50%, 100%);
        font-weight: bold; color: #64748b; font-size: 1.2rem; bottom: -10px;
    }
    
    /* Bola Bergerak */
    .hill-ball {
        width: 60px; height: 60px; background: #3b82f6;
        border: 4px solid white; border-radius: 50%;
        position: absolute; z-index: 20;
        display: flex; align-items: center; justify-content: center;
        color: white; font-weight: bold; font-size: 1.4rem;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        transition: left 1.5s cubic-bezier(0.45, 0, 0.55, 1), bottom 1.5s cubic-bezier(0.45, 0, 0.55, 1), background-color 0.3s;
        transform: translate(-50%, 50%); /* Center ball on line */
    }

    /* 3. Mesin Cerakin */
    .cerakin-row {
        display: flex; align-items: center; justify-content: space-between;
        background: white; border: 3px solid #e2e8f0; border-radius: 1rem;
        padding: 1rem; margin-bottom: 1rem;
    }
    .cerakin-ctrl {
        width: 40px; height: 40px; border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        color: white; font-weight: bold; font-size: 1.5rem; cursor: pointer;
        transition: transform 0.1s; box-shadow: 0 3px 0 rgba(0,0,0,0.2);
        border: none;
    }
    .cerakin-ctrl:active { transform: translateY(3px); box-shadow: none; }
    .cerakin-ctrl.plus { background-color: #22c55e; }
    .cerakin-ctrl.minus { background-color: #ef4444; }

  </style>
</head>
<body class="min-h-screen text-slate-800 pb-10">

  <div class="fixed top-4 left-0 right-0 z-50 px-4 pointer-events-none">
    <div class="max-w-4xl mx-auto bg-green-400 border-4 border-green-600 rounded-full px-6 py-3 shadow-xl flex items-center justify-between pointer-events-auto transform hover:scale-[1.01] transition-transform">
      <div class="flex items-center gap-3">
        <span class="text-3xl animate-bounce">üíØ</span>
        <span id="info-text" class="text-xl font-bold text-green-900 leading-none mt-1">Anggaran & Bundar</span>
      </div>
      <button id="speak-btn" onclick="speakInfo()" class="bg-white hover:bg-green-50 text-green-600 border-2 border-green-200 rounded-full p-2 transition-colors shadow-sm">üîä</button>
    </div>
  </div>
  <div class="h-24"></div>

  <div class="max-w-5xl mx-auto p-4">
    
    <div class="game-card p-6 mb-8 flex items-center justify-center">
        <div id="activity-content" class="w-full relative z-10">
            <div class="py-10 text-center">
                <div class="text-8xl mb-6 animate-pulse">üìè</div>
                <h2 class="text-5xl font-bold text-emerald-600 mb-4">Kemahiran Pemulihan</h2>
                <p class="text-2xl text-slate-500 mb-8 font-semibold">Belajar Mengagak dan Membundarkan Nombor</p>
                <div class="text-4xl animate-bounce">üëá</div>
            </div>
        </div>
    </div>

    <div class="bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg p-6 border-2 border-white">
      <h3 class="text-2xl font-bold text-slate-700 mb-4 text-center">üéÆ Pilih Aktiviti</h3>
      
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8">
        <button onclick="loadActivity(1)" class="btn-3d bg-blue-500 text-white font-bold py-4 px-2 rounded-xl text-lg">üéØ Makmal Anggaran</button>
        <button onclick="loadActivity(2)" class="btn-3d bg-emerald-500 text-white font-bold py-4 px-2 rounded-xl text-lg">‚õ∞Ô∏è Bundar Puluh</button>
        <button onclick="loadActivity(3)" class="btn-3d bg-violet-500 text-white font-bold py-4 px-2 rounded-xl text-lg">‚õ∞Ô∏è Bundar Ratus</button>
        <button onclick="loadActivity(4)" class="btn-3d bg-orange-500 text-white font-bold py-4 px-2 rounded-xl text-lg">‚öôÔ∏è Mesin Cerakin</button>
        <button onclick="loadActivity(5)" class="btn-3d bg-rose-500 text-white font-bold py-4 px-2 rounded-xl text-lg">üìö Klik Nombor</button>
      </div>

      <div class="flex justify-center gap-4 border-t-2 border-slate-100 pt-6">
        <button onclick="clearActivity()" class="btn-3d bg-slate-400 text-white font-bold py-2 px-6 rounded-full text-lg">üè† Menu</button>
        <button onclick="nextActivity()" class="btn-3d bg-indigo-500 text-white font-bold py-2 px-8 rounded-full text-xl">Seterusnya ‚û°Ô∏è</button>
      </div>
    </div>
  </div>

  <script>
    /* --- STANDARD HELPERS --- */
    let currentActivity = 0;
    let ttsEnabled = false;
    let currentInfo = "Pilih aktiviti untuk mula.";
    const r = (min,max) => Math.floor(Math.random()*(max-min+1))+min;

    function triggerWin() { confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 } }); }
    
    function speak(text) { 
        if (!ttsEnabled || !('speechSynthesis' in window)) return; 
        window.speechSynthesis.cancel(); 
        const u = new SpeechSynthesisUtterance(text); 
        u.lang = 'ms-MY'; u.rate = 0.9; u.pitch = 1.1; 
        const voices = window.speechSynthesis.getVoices(); 
        const ms = voices.find(v => v.lang === 'ms-MY' || v.lang?.startsWith('ms')); 
        if (ms) u.voice = ms; 
        window.speechSynthesis.speak(u); 
    }
    
    function setInfo(text) { 
        currentInfo = text; 
        const infoEl = document.getElementById('info-text'); 
        infoEl.style.opacity = 0; 
        setTimeout(() => { infoEl.textContent = text; infoEl.style.opacity = 1; }, 200); 
    }
    
    function speakInfo() { 
        if (!ttsEnabled) { 
            ttsEnabled = true; 
            document.getElementById('speak-btn').classList.add('bg-green-100', 'text-green-600'); 
        } 
        speak(currentInfo); 
    }

    /* --- ROUTER --- */
    function loadActivity(n) {
      currentActivity = n;
      const content = document.getElementById('activity-content');
      content.style.opacity = 0;
      setTimeout(() => {
          if (n === 1) loadEstimationLab(content);
          if (n === 2) loadRoundingHill(content, 'puluh');
          if (n === 3) loadRoundingHill(content, 'ratus');
          if (n === 4) loadDeconMachine(content);
          if (n === 5) loadClickNumberActivity(content);
          content.style.opacity = 1;
      }, 200);
    }

    function clearActivity() {
        currentActivity = 0;
        document.getElementById('activity-content').innerHTML = `<div class="py-10 text-center"><div class="text-8xl mb-6 animate-bounce">üíØ</div><h2 class="text-5xl font-bold text-emerald-600 mb-4">Kemahiran Pemulihan</h2><p class="text-2xl text-slate-500 mb-8 font-semibold">Pilih butang di bawah.</p></div>`;
        setInfo("Pilih aktiviti untuk mula.");
    }
    function nextActivity() { let next = currentActivity + 1; if (next > 5) next = 1; loadActivity(next); }

    /* =========================================
       AKTIVITI 1: Makmal Anggaran
       ========================================= */
    function loadEstimationLab(content) {
        setInfo("Gerakkan slider untuk mengagak jumlah guli.");
        content.innerHTML = `
            <h3 class="text-4xl font-bold text-blue-500 mb-6 text-center">üéØ Makmal Anggaran</h3>
            
            <div class="flex justify-center gap-12 mb-8 items-end">
                <div class="text-center">
                    <div class="jar-container relative">
                        <div class="jar-lid"></div>
                        <div class="guli-fill ref" style="height: 20%"></div>
                        <div class="absolute bottom-2 w-full text-center font-bold text-blue-800">100</div>
                    </div>
                    <div class="mt-2 font-bold text-slate-500">Rujukan</div>
                </div>

                <div class="text-center">
                    <div class="jar-container relative">
                        <div class="jar-lid"></div>
                        <div id="guli-mystery" class="guli-fill" style="height: 0%"></div>
                        <div class="absolute bottom-2 w-full text-center font-bold text-red-800">?</div>
                    </div>
                    <div class="mt-2 font-bold text-slate-500">Misteri</div>
                </div>
            </div>

            <div class="max-w-md mx-auto bg-slate-50 p-6 rounded-2xl border-2 border-slate-200 text-center">
                <div class="text-lg font-bold text-slate-400 uppercase mb-2">Anggaran Saya</div>
                <div id="est-val" class="text-5xl font-black text-slate-700 mb-4">100</div>
                
                <input type="range" id="est-slider" min="100" max="500" value="100" step="10" 
                       class="w-full h-4 bg-slate-200 rounded-lg appearance-none cursor-pointer mb-6 accent-blue-500"
                       oninput="document.getElementById('est-val').textContent = this.value">
                
                <div class="flex justify-center gap-4">
                    <button id="btn-check" class="btn-3d bg-blue-500 text-white font-bold py-3 px-6 rounded-xl text-xl">‚úÖ Semak</button>
                    <button id="btn-new" class="btn-3d bg-emerald-500 text-white font-bold py-3 px-6 rounded-xl text-xl hidden" onclick="setupEstimation()">üîÑ Baru</button>
                </div>
                
                <div id="est-msg" class="mt-4 text-lg font-bold text-slate-500 min-h-[30px]"></div>
            </div>
        `;
        setupEstimation();
    }

    function setupEstimation() {
        const target = r(150, 480);
        const fillHeight = (target / 500) * 100;
        
        document.getElementById('guli-mystery').style.height = fillHeight + '%';
        document.getElementById('est-msg').textContent = "";
        document.getElementById('est-slider').value = 100;
        document.getElementById('est-val').textContent = 100;
        document.getElementById('est-slider').disabled = false;
        
        const btnCheck = document.getElementById('btn-check');
        const btnNew = document.getElementById('btn-new');
        
        btnCheck.classList.remove('hidden');
        btnNew.classList.add('hidden');
        
        btnCheck.onclick = () => {
            const guess = parseInt(document.getElementById('est-slider').value);
            const diff = Math.abs(guess - target);
            let msg = "";
            
            if(diff <= 30) {
                msg = `HEBAT! Jawapan: ${target}.`;
                triggerWin();
                speak("Hebat! Sangat tepat.");
            } else if (diff <= 80) {
                msg = `Boleh tahan! Jawapan: ${target}.`;
                speak("Boleh tahan.");
            } else {
                msg = `Cuba lagi. Jawapan: ${target}.`;
                speak("Cuba lagi.");
            }
            
            document.getElementById('est-msg').textContent = msg;
            btnCheck.classList.add('hidden');
            btnNew.classList.remove('hidden');
            document.getElementById('est-slider').disabled = true;
        };
    }

    /* =========================================
       AKTIVITI 2 & 3: Bukit Bundar (PEMBAIKAN POSISI TITIK & BOLA)
       ========================================= */
    function loadRoundingHill(content, type) {
        const title = type === 'puluh' ? 'Bundar Puluh Terdekat' : 'Bundar Ratus Terdekat';
        const color = type === 'puluh' ? 'emerald' : 'violet';
        
        setInfo("Adakah nombor akan turun ke kiri atau kanan?");

        content.innerHTML = `
            <h3 class="text-4xl font-bold text-${color}-600 mb-6 text-center">‚õ∞Ô∏è ${title}</h3>
            
            <div class="text-center mb-10">
                <div class="text-sm font-bold text-slate-400 uppercase">Nombor</div>
                <div id="rh-num" class="text-7xl font-black text-slate-700">...</div>
                <div class="mt-2">
                    <span class="text-xs font-bold text-amber-500 bg-amber-100 px-2 rounded uppercase">Puncak</span>
                    <span id="txt-mid" class="font-bold text-amber-600 text-xl">5</span>
                </div>
            </div>

            <div class="hill-container max-w-2xl mx-auto">
                <svg class="hill-svg" viewBox="0 0 300 100" preserveAspectRatio="none">
                    <path d="M 20,90 Q 150,-50 280,90" fill="none" stroke="#94a3b8" stroke-width="4" stroke-linecap="round" />
                    <line x1="0" y1="90" x2="300" y2="90" stroke="#cbd5e1" stroke-width="4" />
                </svg>
                
                <div class="hill-point" style="left: 6.7%; bottom: 10%;"></div>
                <span id="txt-start" class="hill-label" style="left: 6.7%; bottom: -10px;">0</span>
                
                <div class="hill-point" style="left: 50%; bottom: 80%; border-color: #f59e0b; width: 12px; height: 12px;"></div>
                
                <div class="hill-point" style="left: 93.3%; bottom: 10%;"></div>
                <span id="txt-end" class="hill-label" style="left: 93.3%; bottom: -10px;">10</span>

                <div id="hill-ball" class="hill-ball" style="left: 6.7%; bottom: 10%;">?</div>
            </div>

            <div id="rh-res" class="text-center font-bold text-3xl text-slate-700 min-h-[40px] mt-8 mb-4"></div>

            <div class="flex justify-center gap-4">
                <button id="rh-go" class="btn-3d bg-${color}-500 text-white font-bold py-3 px-8 rounded-xl text-xl">üöÄ Bundarkan!</button>
                
                <button id="rh-replay" class="btn-3d bg-blue-500 text-white font-bold py-3 px-6 rounded-xl text-xl hidden">‚Ü©Ô∏è Ulang</button>
                <button id="rh-new" class="btn-3d bg-emerald-500 text-white font-bold py-3 px-6 rounded-xl text-xl hidden">Soalan Baru ‚û°Ô∏è</button>
            </div>
        `;
        setupRounding(type);
    }

    function setupRounding(type) {
        let num, start, end, mid, ans;
        
        // Generate Number
        if (type === 'puluh') {
            num = r(101, 998);
            start = Math.floor(num/10)*10;
            end = start + 10;
            mid = start + 5;
        } else {
            num = r(101, 998);
            start = Math.floor(num/100)*100;
            end = start + 100;
            mid = start + 50;
        }
        
        ans = (num >= mid) ? end : start;

        // Update UI Texts
        document.getElementById('rh-num').textContent = num;
        document.getElementById('txt-start').textContent = start;
        document.getElementById('txt-end').textContent = end;
        document.getElementById('txt-mid').textContent = mid;
        document.getElementById('rh-res').textContent = "";
        
        // Calculate initial ball position on curve (t=0..1)
        // Curve logic: Quadratic Bezier P0(20,90), P1(150,-50), P2(280,90)
        // Simplified visual calc:
        const t = (num - start) / (end - start);
        // Map t to percentages: x goes from 6.7% to 93.3% (range 86.6%)
        const startLeft = 6.7 + (t * 86.6);
        // y approximates parabola. Peak at t=0.5 is 80%, base is 10%.
        // formula: -280*t*t + 280*t + 10 (based on SVG y)
        const startBottom = (-280 * t * t + 280 * t + 10);
        
        const ball = document.getElementById('hill-ball');
        ball.textContent = num;
        ball.style.transition = 'none';
        ball.style.left = `${startLeft}%`;
        ball.style.bottom = `${startBottom}%`;
        ball.style.backgroundColor = '#3b82f6';

        // Buttons
        const btnGo = document.getElementById('rh-go');
        const btnReplay = document.getElementById('rh-replay');
        const btnNew = document.getElementById('rh-new');
        
        btnGo.classList.remove('hidden');
        btnReplay.classList.add('hidden');
        btnNew.classList.add('hidden');
        
        // 1. START Animation
        btnGo.onclick = () => {
            btnGo.classList.add('hidden');
            ball.style.transition = 'left 1.5s ease-in, bottom 1.5s ease-in, background-color 0.3s';
            
            if (ans === end) {
                // Roll Right
                ball.style.left = '93.3%';
                ball.style.bottom = '10%';
                setInfo(`Nombor ${num} lebih dekat dengan ${end}.`);
                ball.style.backgroundColor = '#10b981';
            } else {
                // Roll Left
                ball.style.left = '6.7%';
                ball.style.bottom = '10%';
                setInfo(`Nombor ${num} kurang dari separuh. Kembali ke ${start}.`);
                ball.style.backgroundColor = '#ef4444';
            }
            
            setTimeout(() => {
                document.getElementById('rh-res').textContent = `Jawapan: ${ans}`;
                triggerWin();
                speak(`Jawapannya ialah ${ans}`);
                btnReplay.classList.remove('hidden');
                btnNew.classList.remove('hidden');
            }, 1500);
        };
        
        // 2. REPLAY Animation
        btnReplay.onclick = () => {
            ball.style.transition = 'none';
            ball.style.left = `${startLeft}%`;
            ball.style.bottom = `${startBottom}%`;
            ball.style.backgroundColor = '#3b82f6';
            document.getElementById('rh-res').textContent = "";
            
            btnReplay.classList.add('hidden');
            btnNew.classList.add('hidden');
            btnGo.classList.remove('hidden');
            setInfo("Sedia untuk bundarkan semula.");
        };
        
        // 3. NEW Question
        btnNew.onclick = () => setupRounding(type);
    }

    /* =========================================
       AKTIVITI 4: Mesin Cerakin
       ========================================= */
    let cm = { target:0, curR:0, curP:0, curS:0 };

    function loadDeconMachine(content) {
        cm.target = r(101, 999);
        cm.curR=0; cm.curP=0; cm.curS=0;
        setInfo("Padankan jumlah anda dengan nombor sasaran.");

        content.innerHTML = `
            <h3 class="text-4xl font-bold text-orange-500 mb-6 text-center">‚öôÔ∏è Mesin Cerakin</h3>
            
            <div class="flex flex-col items-center mb-6">
                <div class="text-sm font-bold text-slate-400 uppercase">SASARAN</div>
                <div class="text-7xl font-black text-slate-700">${cm.target}</div>
            </div>

            <div class="max-w-md mx-auto space-y-4">
                <div class="cerakin-row">
                    <span class="font-bold text-pink-600 text-xl w-24">RATUS</span>
                    <div class="flex items-center gap-4">
                        <button onclick="adjCerakin('r', -100)" class="cerakin-ctrl minus">-</button>
                        <span id="val-r" class="text-3xl font-bold text-slate-700 w-24 text-center">0</span>
                        <button onclick="adjCerakin('r', 100)" class="cerakin-ctrl plus">+</button>
                    </div>
                </div>

                <div class="cerakin-row">
                    <span class="font-bold text-blue-600 text-xl w-24">PULUH</span>
                    <div class="flex items-center gap-4">
                        <button onclick="adjCerakin('p', -10)" class="cerakin-ctrl minus">-</button>
                        <span id="val-p" class="text-3xl font-bold text-slate-700 w-24 text-center">0</span>
                        <button onclick="adjCerakin('p', 10)" class="cerakin-ctrl plus">+</button>
                    </div>
                </div>

                <div class="cerakin-row">
                    <span class="font-bold text-amber-600 text-xl w-24">SA</span>
                    <div class="flex items-center gap-4">
                        <button onclick="adjCerakin('s', -1)" class="cerakin-ctrl minus">-</button>
                        <span id="val-s" class="text-3xl font-bold text-slate-700 w-24 text-center">0</span>
                        <button onclick="adjCerakin('s', 1)" class="cerakin-ctrl plus">+</button>
                    </div>
                </div>
            </div>

            <div class="text-center mt-6 bg-orange-50 p-4 rounded-xl border-2 border-orange-100 inline-block w-full max-w-md">
                <div class="text-lg font-bold text-slate-500 mb-1">Jumlah Anda</div>
                <div id="total-display" class="text-4xl font-black text-orange-600">0</div>
            </div>

            <div class="text-center mt-6">
                <button onclick="loadActivity(4)" class="btn-3d bg-slate-400 text-white font-bold py-2 px-6 rounded-xl text-lg">üîÑ Soalan Baru</button>
            </div>
        `;
    }

    function adjCerakin(type, val) {
        if (type === 'r') { if (cm.curR + val >= 0 && cm.curR + val <= 900) cm.curR += val; }
        else if (type === 'p') { if (cm.curP + val >= 0 && cm.curP + val <= 90) cm.curP += val; }
        else if (type === 's') { if (cm.curS + val >= 0 && cm.curS + val <= 9) cm.curS += val; }
        updateCerakinUI();
    }

    function updateCerakinUI() {
        document.getElementById('val-r').textContent = cm.curR;
        document.getElementById('val-p').textContent = cm.curP;
        document.getElementById('val-s').textContent = cm.curS;
        
        const total = cm.curR + cm.curP + cm.curS;
        const disp = document.getElementById('total-display');
        disp.textContent = total;

        if (total === cm.target) {
            disp.classList.replace('text-orange-600', 'text-green-600');
            disp.innerHTML += " ‚úÖ TEPAT!";
            triggerWin();
            speak("Tahniah! Jawapan tepat.");
            document.querySelectorAll('.cerakin-ctrl').forEach(b => b.disabled = true);
        } else {
            disp.classList.replace('text-green-600', 'text-orange-600');
            document.querySelectorAll('.cerakin-ctrl').forEach(b => b.disabled = false);
        }
    }

    /* =========================================
       AKTIVITI 5: Klik Nombor
       ========================================= */
    function loadClickNumberActivity(content) {
      setInfo("Klik nombor untuk lihat info bundar.");
      const numbers = [123, 458, 295, 612, 879, 344];
      
      content.innerHTML = `
        <h3 class="text-4xl font-bold text-rose-500 mb-6 text-center">üìö Klik Nombor</h3>
        
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4 max-w-3xl mx-auto">
            ${numbers.map(n => `
                <button onclick="showNumInfo(${n})" class="btn-3d bg-white border-2 border-rose-100 text-rose-600 p-6 rounded-2xl text-4xl font-black shadow-sm hover:bg-rose-50">
                    ${n}
                </button>
            `).join('')}
        </div>

        <div id="info-box" class="mt-8 mx-auto max-w-xl bg-rose-50 border-2 border-rose-200 rounded-2xl p-6 text-center min-h-[140px] flex flex-col justify-center items-center">
            <div class="text-slate-400 font-bold text-xl">Pilih nombor di atas</div>
        </div>
      `;
    }

    function showNumInfo(n) {
        const rRound = Math.round(n/100)*100;
        const pRound = Math.round(n/10)*10;
        
        const box = document.getElementById('info-box');
        box.innerHTML = `
            <div class="text-6xl font-black text-rose-700 mb-4">${n}</div>
            <div class="flex justify-around w-full text-left">
                <div class="bg-white p-4 rounded-xl border border-rose-100 shadow-sm">
                    <div class="text-xs text-slate-400 font-bold uppercase mb-1">Bundar Puluh</div>
                    <div class="text-3xl font-bold text-rose-600">${pRound}</div>
                </div>
                <div class="bg-white p-4 rounded-xl border border-rose-100 shadow-sm">
                    <div class="text-xs text-slate-400 font-bold uppercase mb-1">Bundar Ratus</div>
                    <div class="text-3xl font-bold text-rose-600">${rRound}</div>
                </div>
            </div>
        `;
        speak(`${n}. Bundar puluh, ${pRound}. Bundar ratus, ${rRound}.`);
    }

    // Init TTS keepalive
    if ('speechSynthesis' in window) setInterval(() => { if (window.speechSynthesis.paused) window.speechSynthesis.resume(); }, 1000);

  </script>
</body>
</html>
